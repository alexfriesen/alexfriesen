[{"_path":"/blog/hello-world","_dir":"blog","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Hello World","description":"Hi guys! In this blog I will be posting my Coding Adventures, stay tuned for more!","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"hello-world"},"children":[{"type":"text","value":"Hello World"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi guys! In this blog I will be posting my Coding Adventures, stay tuned for more!"}]}]},"date":"11.11.2020 20:00","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"hello-world"},"children":[{"type":"text","value":"Hello World"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi guys! In this blog I will be posting my Coding Adventures, stay tuned for more!"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"hello-world","depth":2,"text":"Hello World"}]}},"_type":"markdown","_id":"content:blog:1.hello-world.md","_source":"content","_file":"blog/1.hello-world.md","_extension":"md"},{"_path":"/blog/angular-testing-guard-fns","_dir":"blog","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Angular: Testing Guard Functions","description":"How to unit test Guard Functions in Angular.","excerpt":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"angular-testing-guard-functions"},"children":[{"type":"text","value":"Angular: Testing Guard Functions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Recently the Angular Team added a new and handy way to define Route Guards in a functional way."}]},{"type":"element","tag":"h3","props":{"id":"example-canactivatefn"},"children":[{"type":"text","value":"Example CanActivateFn"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a simple CanActivateFn example:"}]},{"type":"element","tag":"code","props":{"code":"export const authGuard: CanActivateFn = (route, state) => {\n    const auth = inject(AuthService);\n    return auth.isLoggedIn;\n};\n","filename":"auth.guard.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export const authGuard: CanActivateFn = (route, state) => {\n    const auth = inject(AuthService);\n    return auth.isLoggedIn;\n};\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"testing"},"children":[{"type":"text","value":"Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see from the example above we are not dealing with an Injectable and need to run need a way to execute our Function within a DI Context."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Luckily we grab an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EnvironmentInjector"}]},{"type":"text","value":" from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TestBed"}]},{"type":"text","value":" to run our function with all our Providers."}]},{"type":"element","tag":"code","props":{"code":"describe('TourStausGuard', () => {\n    beforeEach(() => {\n        TestBed.configureTestingModule({\n            providers: [\n                {\n                    provide: AuthService,\n                    useValue: { isLoggedIn: true },\n                },\n            ],\n        });\n    });\n\n    it('should allow accessing active tours', () => {\n        const envInjector = TestBed.inject(EnvironmentInjector);\n        envInjector.runInContext(() => {\n            expect(guard(null, null)).toBe(true);\n        });\n    });\n});\n","filename":"auth.guard.spec.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"describe('TourStausGuard', () => {\n    beforeEach(() => {\n        TestBed.configureTestingModule({\n            providers: [\n                {\n                    provide: AuthService,\n                    useValue: { isLoggedIn: true },\n                },\n            ],\n        });\n    });\n\n    it('should allow accessing active tours', () => {\n        const envInjector = TestBed.inject(EnvironmentInjector);\n        envInjector.runInContext(() => {\n            expect(guard(null, null)).toBe(true);\n        });\n    });\n});\n"}]}]}]}]},"date":"12.29.2022 20:00","image":"/images/angular.svg","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"angular-testing-guard-functions"},"children":[{"type":"text","value":"Angular: Testing Guard Functions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Recently the Angular Team added a new and handy way to define Route Guards in a functional way."}]},{"type":"element","tag":"h3","props":{"id":"example-canactivatefn"},"children":[{"type":"text","value":"Example CanActivateFn"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a simple CanActivateFn example:"}]},{"type":"element","tag":"code","props":{"code":"export const authGuard: CanActivateFn = (route, state) => {\n    const auth = inject(AuthService);\n    return auth.isLoggedIn;\n};\n","filename":"auth.guard.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"authGuard"}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a6f0b8"},"children":[{"type":"text","value":"CanActivateFn"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-a6f0b8"},"children":[{"type":"text","value":"route"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a6f0b8"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"inject"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"(AuthService);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" auth.isLoggedIn;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"testing"},"children":[{"type":"text","value":"Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see from the example above we are not dealing with an Injectable and need to run need a way to execute our Function within a DI Context."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Luckily we grab an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EnvironmentInjector"}]},{"type":"text","value":" from "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TestBed"}]},{"type":"text","value":" to run our function with all our Providers."}]},{"type":"element","tag":"code","props":{"code":"describe('TourStausGuard', () => {\n    beforeEach(() => {\n        TestBed.configureTestingModule({\n            providers: [\n                {\n                    provide: AuthService,\n                    useValue: { isLoggedIn: true },\n                },\n            ],\n        });\n    });\n\n    it('should allow accessing active tours', () => {\n        const envInjector = TestBed.inject(EnvironmentInjector);\n        envInjector.runInContext(() => {\n            expect(guard(null, null)).toBe(true);\n        });\n    });\n});\n","filename":"auth.guard.spec.ts","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"describe"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b8bee"},"children":[{"type":"text","value":"'TourStausGuard'"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"beforeEach"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"        TestBed."}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"configureTestingModule"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"            providers: ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"                {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"                    provide: AuthService,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"                    useValue: { isLoggedIn: "}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"                },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"            ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"        });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"it"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1b8bee"},"children":[{"type":"text","value":"'should allow accessing active tours'"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"envInjector"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" TestBed."}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"inject"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"(EnvironmentInjector);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"        envInjector."}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"runInContext"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"class":"ct-ca554e"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"expect"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"guard"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"))."}]},{"type":"element","tag":"span","props":{"class":"ct-5772da"},"children":[{"type":"text","value":"toBe"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dbdb5e"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"        });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f68aa2"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-1b8bee{color:#A5D6FF}\n.ct-dbdb5e{color:#79C0FF}\n.ct-a6f0b8{color:#FFA657}\n.ct-5772da{color:#D2A8FF}\n.ct-f68aa2{color:#C9D1D9}\n.ct-ca554e{color:#FF7B72}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"angular-testing-guard-functions","depth":2,"text":"Angular: Testing Guard Functions","children":[{"id":"example-canactivatefn","depth":3,"text":"Example CanActivateFn"},{"id":"testing","depth":3,"text":"Testing"}]}]}},"_type":"markdown","_id":"content:blog:2.angular-testing-guard-fns.md","_source":"content","_file":"blog/2.angular-testing-guard-fns.md","_extension":"md"}]