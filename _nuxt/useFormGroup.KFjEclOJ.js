import{h as T,ax as x,n as h,a5 as y,ay as A,l as m,az as I,C as z,s as S}from"./entry.BRWWg_yR.js";function b(n){return typeof n=="function"?n():T(n)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const w=()=>{};function B(n,a){function t(...e){return new Promise((s,l)=>{Promise.resolve(n(()=>a.apply(this,e),{fn:a,thisArg:this,args:e})).then(s).catch(l)})}return t}function C(n,a={}){let t,e,s=w;const l=u=>{clearTimeout(u),s(),s=w};return u=>{const c=b(n),i=b(a.maxWait);return t&&l(t),c<=0||i!==void 0&&i<=0?(e&&(l(e),e=null),Promise.resolve(u())):new Promise((r,o)=>{s=a.rejectOnCancel?o:r,i&&!e&&(e=setTimeout(()=>{t&&l(t),e=null,r(u())},i)),t=setTimeout(()=>{e&&l(e),e=null,r(u())},c)})}}function W(n,a=200,t={}){return B(C(a,t),n)}function D(n,a,t){let e;x(t)?e={evaluating:t}:e=t||{};const{lazy:s=!1,evaluating:l=void 0,shallow:f=!0,onError:u=w}=e,c=h(!s),i=f?y(a):h(a);let r=0;return A(async o=>{if(!c.value)return;r++;const v=r;let E=!1;l&&Promise.resolve().then(()=>{l.value=!0});try{const g=await n(_=>{o(()=>{l&&(l.value=!1),E||_()})});v===r&&(i.value=g)}catch(g){u(g)}finally{l&&v===r&&(l.value=!1),E=!0}}),s?m(()=>(c.value=!0,i.value)):i}function N(n){var a;const t=b(n);return(a=t==null?void 0:t.$el)!=null?a:t}const d=new Map;function R(n){const a=I();function t(u){var c;const i=d.get(n)||new Set;i.add(u),d.set(n,i);const r=()=>s(u);return(c=a==null?void 0:a.cleanups)==null||c.push(r),r}function e(u){function c(...i){s(c),u(...i)}return t(c)}function s(u){const c=d.get(n);c&&(c.delete(u),c.size||l())}function l(){d.delete(n)}function f(u,c){var i;(i=d.get(n))==null||i.forEach(r=>r(u,c))}return{on:t,once:e,off:s,emit:f,reset:l}}let F=0;function j(){return F=(F+1)%Number.MAX_SAFE_INTEGER,`nuid-${F}`}const V=(n,a)=>{const t=z("form-events",void 0),e=z("form-group",void 0),s=z("form-inputs",void 0),l=h(n==null?void 0:n.id);S(()=>{l.value=(n==null?void 0:n.legend)===null||n.legend?void 0:(n==null?void 0:n.id)??j(),e&&(e.inputId.value=l.value,s&&(s.value[e.name.value]=l))});const f=h(!1);function u(o,v){t&&t.emit({type:o,path:v})}function c(){u("blur",e==null?void 0:e.name.value),f.value=!0}function i(){u("change",e==null?void 0:e.name.value)}const r=W(()=>{(f.value||e!=null&&e.eagerValidation.value)&&u("input",e==null?void 0:e.name.value)},300);return{inputId:l,name:m(()=>(n==null?void 0:n.name)??(e==null?void 0:e.name.value)),size:m(()=>{var v;const o=a.size[e==null?void 0:e.size.value]?e==null?void 0:e.size.value:null;return(n==null?void 0:n.size)??o??((v=a==null?void 0:a.default)==null?void 0:v.size)}),color:m(()=>{var o;return(o=e==null?void 0:e.error)!=null&&o.value?"red":n==null?void 0:n.color}),emitFormBlur:c,emitFormInput:r,emitFormChange:i}};export{R as a,j as b,N as c,W as d,D as e,V as u};
