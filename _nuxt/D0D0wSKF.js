import{e as _,R as b,s as f,q as n,S as A,x as I,o as w,c as k,A as E,j as m,a8 as L,W as N,U as P,a9 as j,f as B,Q as C}from"./CWo4Yde4.js";import{i as R,u as U,a as W,c as v,m as q}from"./Ej3icmv5.js";const O=["src"],$=_({__name:"NuxtImg",props:R,emits:["load","error"],setup(d,{emit:t}){const s=d,l=b(),r=t,x=!1,p=U(),a=W(s),c=f(!1),o=f(),u=n(()=>p.getSizes(s.src,{...a.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...a.modifiers.value,width:v(s.width),height:v(s.height)}})),y=n(()=>{const e={...a.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=u.value.sizes,e.srcset=u.value.srcset),e}),g=n(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const i=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return p(s.src,{...a.modifiers.value,width:i[0],height:i[1],quality:i[2]||50,blur:i[3]||3},a.options.value)}),h=n(()=>s.sizes?u.value.src:p(s.src,a.modifiers.value,a.options.value)),z=n(()=>g.value?g.value:h.value),S=A().isHydrating;return I(()=>{if(g.value){const e=new Image;h.value&&(e.src=h.value),s.sizes&&(e.sizes=u.value.sizes||"",e.srcset=u.value.srcset),e.onload=i=>{c.value=!0,r("load",i)},q("nuxt-image");return}o.value&&(o.value.complete&&S&&(o.value.getAttribute("data-error")?r("error",new Event("error")):r("load",new Event("load"))),o.value.onload=e=>{r("load",e)},o.value.onerror=e=>{r("error",e)})}),(e,i)=>(w(),k("img",E({ref_key:"imgEl",ref:o,class:s.placeholder&&!c.value?s.placeholderClass:void 0},{...m(x)?{onerror:"this.setAttribute('data-error', 1)"}:{},...y.value,...m(l)},{src:z.value}),null,16,O))}}),D=Object.assign($,{__name:"NuxtImg"}),F=_({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(d){const t=d,s=n(()=>{var l;if((l=t.src)!=null&&l.startsWith("/")&&!t.src.startsWith("//")){const r=L(N(P().app.baseURL));if(r!=="/"&&!t.src.startsWith(r))return j(r,t.src)}return t.src});return(l,r)=>(w(),B(C(m(D)),{src:m(s),alt:t.alt,width:t.width,height:t.height},null,8,["src","alt","width","height"]))}}),T=Object.assign(F,{__name:"ProseImg"});export{T as default};
