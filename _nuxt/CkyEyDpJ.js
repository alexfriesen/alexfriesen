import{f as _,R as x,l as v,k as n,S as A,p as k,o as w,c as E,v as I,g as d,a9 as L,X as N,V as B,aa as C,e as R,N as P}from"./Bsz1mB7L.js";import{i as U,u as W,a as $,c as g,m as j}from"./B4Slgoc6.js";const q=["src"],D=_({__name:"NuxtImg",props:U,emits:["load","error"],setup(p,{emit:t}){const s=p,l=x(),r=t,y=!1,m=W(),a=$(s),c=v(!1),o=v(),u=n(()=>m.getSizes(s.src,{...a.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...a.modifiers.value,width:g(s.width),height:g(s.height)}})),z=n(()=>{const e={...a.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=u.value.sizes,e.srcset=u.value.srcset),e}),h=n(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const i=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return m(s.src,{...a.modifiers.value,width:i[0],height:i[1],quality:i[2]||50,blur:i[3]||3},a.options.value)}),f=n(()=>s.sizes?u.value.src:m(s.src,a.modifiers.value,a.options.value)),S=n(()=>h.value?h.value:f.value),b=A().isHydrating;return k(()=>{if(h.value){const e=new Image;f.value&&(e.src=f.value),s.sizes&&(e.sizes=u.value.sizes||"",e.srcset=u.value.srcset),e.onload=i=>{c.value=!0,r("load",i)},j("nuxt-image");return}o.value&&(o.value.complete&&b&&(o.value.getAttribute("data-error")?r("error",new Event("error")):r("load",new Event("load"))),o.value.onload=e=>{r("load",e)},o.value.onerror=e=>{r("error",e)})}),(e,i)=>(w(),E("img",I({ref_key:"imgEl",ref:o,class:s.placeholder&&!c.value?s.placeholderClass:void 0},{...d(y)?{onerror:"this.setAttribute('data-error', 1)"}:{},...z.value,...d(l)},{src:S.value}),null,16,q))}}),T=_({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(p){const t=p,s=n(()=>{var l;if((l=t.src)!=null&&l.startsWith("/")&&!t.src.startsWith("//")){const r=L(N(B().app.baseURL));if(r!=="/"&&!t.src.startsWith(r))return C(r,t.src)}return t.src});return(l,r)=>(w(),R(P(d(D)),{src:d(s),alt:t.alt,width:t.width,height:t.height},null,8,["src","alt","width","height"]))}});export{T as default};
