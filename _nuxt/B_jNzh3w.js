import{i as A,u as k,a as I,c as v,m as N}from"./BlxGnE4B.js";import{f as z,R as C,l as w,k as l,S as E,p as L,o as S,c as B,v as R,g as d,V as y,a9 as P,X as U,aa as W,e as $,N as j}from"./C5r6tZi_.js";const q=["src"],D=z({__name:"NuxtImg",props:A,emits:["load","error"],setup(i,{emit:m}){const s=i,p=C(),t=m,o=!1,h=k(),r=I(s),c=w(!1),n=w(),u=l(()=>h.getSizes(s.src,{...r.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...r.modifiers.value,width:v(s.width),height:v(s.height)}})),_=l(()=>{const e={...r.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=u.value.sizes,e.srcset=u.value.srcset),e}),f=l(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const a=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return h(s.src,{...r.modifiers.value,width:a[0],height:a[1],quality:a[2]||50,blur:a[3]||3},r.options.value)}),g=l(()=>s.sizes?u.value.src:h(s.src,r.modifiers.value,r.options.value)),b=l(()=>f.value?f.value:g.value),x=E().isHydrating;return L(()=>{if(f.value){const e=new Image;g.value&&(e.src=g.value),s.sizes&&(e.sizes=u.value.sizes||"",e.srcset=u.value.srcset),e.onload=a=>{c.value=!0,t("load",a)},N("nuxt-image");return}n.value&&(n.value.complete&&x&&(n.value.getAttribute("data-error")?t("error",new Event("error")):t("load",new Event("load"))),n.value.onload=e=>{t("load",e)},n.value.onerror=e=>{t("error",e)})}),(e,a)=>(S(),B("img",R({ref_key:"imgEl",ref:n,class:s.placeholder&&!c.value?s.placeholderClass:void 0},{...d(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},..._.value,...d(p)},{src:b.value}),null,16,q))}}),T=z({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(i){const m=y().public.mdc.useNuxtImage?D:"img",s=i,p=l(()=>{var t;if((t=s.src)!=null&&t.startsWith("/")&&!s.src.startsWith("//")){const o=P(U(y().app.baseURL));if(o!=="/"&&!s.src.startsWith(o))return W(o,s.src)}return s.src});return(t,o)=>(S(),$(j(d(m)),{src:d(p),alt:i.alt,width:i.width,height:i.height},null,8,["src","alt","width","height"]))}});export{T as default};
