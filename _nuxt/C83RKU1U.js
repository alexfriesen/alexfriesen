import{g as E,aC as T,l as w,a2 as _,aD as x,k as m,a7 as y,A as g}from"./BxRY9zcv.js";function z(t){return typeof t=="function"?t():E(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const F=()=>{};function A(t,c){function n(...a){return new Promise((e,i)=>{Promise.resolve(t(()=>c.apply(this,a),{fn:c,thisArg:this,args:a})).then(e).catch(i)})}return n}function B(t,c={}){let n,a,e=F;const i=l=>{clearTimeout(l),e(),e=F};return l=>{const u=z(t),s=z(c.maxWait);return n&&i(n),u<=0||s!==void 0&&s<=0?(a&&(i(a),a=null),Promise.resolve(l())):new Promise((f,r)=>{e=c.rejectOnCancel?r:f,s&&!a&&(a=setTimeout(()=>{n&&i(n),a=null,f(l())},s)),n=setTimeout(()=>{a&&i(a),a=null,f(l())},u)})}}function C(t,c=200,n={}){return A(B(c,n),t)}function W(t,c,n){let a;T(n)?a={evaluating:n}:a=n||{};const{lazy:e=!1,evaluating:i=void 0,shallow:o=!0,onError:l=F}=a,u=w(!e),s=o?_(c):w(c);let f=0;return x(async r=>{if(!u.value)return;f++;const v=f;let b=!1;i&&Promise.resolve().then(()=>{i.value=!0});try{const h=await t(I=>{r(()=>{i&&(i.value=!1),b||I()})});v===f&&(s.value=h)}catch(h){l(h)}finally{i&&v===f&&(i.value=!1),b=!0}}),e?m(()=>(u.value=!0,s.value)):s}function j(t){var c;const n=z(t);return(c=n==null?void 0:n.$el)!=null?c:n}const d=new Map;function D(t){const c=y();function n(l){var u;const s=d.get(t)||new Set;s.add(l),d.set(t,s);const f=()=>e(l);return(u=c==null?void 0:c.cleanups)==null||u.push(f),f}function a(l){function u(...s){e(u),l(...s)}return n(u)}function e(l){const u=d.get(t);u&&(u.delete(l),u.size||i())}function i(){d.delete(t)}function o(l,u){var s;(s=d.get(t))==null||s.forEach(f=>f(l,u))}return{on:n,once:a,off:e,emit:o,reset:i}}const V=(t,c,n=!0)=>{const a=g("form-events",void 0),e=g("form-group",void 0),i=g("form-inputs",void 0);e&&(!n||t!=null&&t.legend?e.inputId.value=void 0:t!=null&&t.id&&(e.inputId.value=t==null?void 0:t.id),i&&(i.value[e.name.value]=e.inputId.value));const o=w(!1);function l(r,v){a&&a.emit({type:r,path:v})}function u(){l("blur",e==null?void 0:e.name.value),o.value=!0}function s(){l("change",e==null?void 0:e.name.value)}const f=C(()=>{(o.value||e!=null&&e.eagerValidation.value)&&l("input",e==null?void 0:e.name.value)},300);return{inputId:m(()=>(t==null?void 0:t.id)??(e==null?void 0:e.inputId.value)),name:m(()=>(t==null?void 0:t.name)??(e==null?void 0:e.name.value)),size:m(()=>{var v;const r=c.size[e==null?void 0:e.size.value]?e==null?void 0:e.size.value:null;return(t==null?void 0:t.size)??r??((v=c.default)==null?void 0:v.size)}),color:m(()=>{var r;return(r=e==null?void 0:e.error)!=null&&r.value?"red":t==null?void 0:t.color}),emitFormBlur:u,emitFormInput:f,emitFormChange:s}};export{D as a,j as b,C as c,W as d,V as u};
