import{g as E,aC as T,l as w,a2 as _,aD as x,k as m,a7 as y,A as g}from"./DcmquBMR.js";function z(t){return typeof t=="function"?t():E(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const F=()=>{};function A(t,i){function n(...a){return new Promise((e,c)=>{Promise.resolve(t(()=>i.apply(this,a),{fn:i,thisArg:this,args:a})).then(e).catch(c)})}return n}function B(t,i={}){let n,a,e=F;const c=l=>{clearTimeout(l),e(),e=F};return l=>{const u=z(t),s=z(i.maxWait);return n&&c(n),u<=0||s!==void 0&&s<=0?(a&&(c(a),a=null),Promise.resolve(l())):new Promise((f,r)=>{e=i.rejectOnCancel?r:f,s&&!a&&(a=setTimeout(()=>{n&&c(n),a=null,f(l())},s)),n=setTimeout(()=>{a&&c(a),a=null,f(l())},u)})}}function C(t,i=200,n={}){return A(B(i,n),t)}function W(t,i,n){let a;T(n)?a={evaluating:n}:a=n||{};const{lazy:e=!1,evaluating:c=void 0,shallow:o=!0,onError:l=F}=a,u=w(!e),s=o?_(i):w(i);let f=0;return x(async r=>{if(!u.value)return;f++;const v=f;let b=!1;c&&Promise.resolve().then(()=>{c.value=!0});try{const h=await t(I=>{r(()=>{c&&(c.value=!1),b||I()})});v===f&&(s.value=h)}catch(h){l(h)}finally{c&&v===f&&(c.value=!1),b=!0}}),e?m(()=>(u.value=!0,s.value)):s}function j(t){var i;const n=z(t);return(i=n==null?void 0:n.$el)!=null?i:n}const d=new Map;function D(t){const i=y();function n(l){var u;const s=d.get(t)||new Set;s.add(l),d.set(t,s);const f=()=>e(l);return(u=i==null?void 0:i.cleanups)==null||u.push(f),f}function a(l){function u(...s){e(u),l(...s)}return n(u)}function e(l){const u=d.get(t);u&&(u.delete(l),u.size||c())}function c(){d.delete(t)}function o(l,u){var s;(s=d.get(t))==null||s.forEach(f=>f(l,u))}return{on:n,once:a,off:e,emit:o,reset:c}}const V=(t,i,n=!0)=>{const a=g("form-events",void 0),e=g("form-group",void 0),c=g("form-inputs",void 0);e&&(!n||t.legend?e.inputId.value=void 0:t!=null&&t.id&&(e.inputId.value=t==null?void 0:t.id),c&&(c.value[e.name.value]=e.inputId.value));const o=w(!1);function l(r,v){a&&a.emit({type:r,path:v})}function u(){l("blur",e==null?void 0:e.name.value),o.value=!0}function s(){l("change",e==null?void 0:e.name.value)}const f=C(()=>{(o.value||e!=null&&e.eagerValidation.value)&&l("input",e==null?void 0:e.name.value)},300);return{inputId:m(()=>(t==null?void 0:t.id)??(e==null?void 0:e.inputId.value)),name:m(()=>(t==null?void 0:t.name)??(e==null?void 0:e.name.value)),size:m(()=>{var v;const r=i.size[e==null?void 0:e.size.value]?e==null?void 0:e.size.value:null;return(t==null?void 0:t.size)??r??((v=i.default)==null?void 0:v.size)}),color:m(()=>{var r;return(r=e==null?void 0:e.error)!=null&&r.value?"red":t==null?void 0:t.color}),emitFormBlur:u,emitFormInput:f,emitFormChange:s}};export{D as a,j as b,C as c,W as d,V as u};
