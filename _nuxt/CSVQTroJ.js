import{aC as F,aF as I,s as w,a1 as T,aG as _,q as m,a6 as x,E as g}from"./CWo4Yde4.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const z=()=>{};function B(t,c){function n(...a){return new Promise((e,i)=>{Promise.resolve(t(()=>c.apply(this,a),{fn:c,thisArg:this,args:a})).then(e).catch(i)})}return n}function C(t,c={}){let n,a,e=z;const i=l=>{clearTimeout(l),e(),e=z};return l=>{const u=F(t),s=F(c.maxWait);return n&&i(n),u<=0||s!==void 0&&s<=0?(a&&(i(a),a=null),Promise.resolve(l())):new Promise((f,r)=>{e=c.rejectOnCancel?r:f,s&&!a&&(a=setTimeout(()=>{n&&i(n),a=null,f(l())},s)),n=setTimeout(()=>{a&&i(a),a=null,f(l())},u)})}}function S(t,c=200,n={}){return B(C(c,n),t)}function j(t,c,n){let a;I(n)?a={evaluating:n}:a=n;const{lazy:e=!1,evaluating:i=void 0,shallow:v=!0,onError:l=z}=a,u=w(!e),s=v?T(c):w(c);let f=0;return _(async r=>{if(!u.value)return;f++;const o=f;let b=!1;i&&Promise.resolve().then(()=>{i.value=!0});try{const h=await t(E=>{r(()=>{i&&(i.value=!1),b||E()})});o===f&&(s.value=h)}catch(h){l(h)}finally{i&&o===f&&(i.value=!1),b=!0}}),e?m(()=>(u.value=!0,s.value)):s}function y(t){var c;const n=F(t);return(c=n==null?void 0:n.$el)!=null?c:n}const d=new Map;function A(t){const c=x();function n(l){var u;const s=d.get(t)||new Set;s.add(l),d.set(t,s);const f=()=>e(l);return(u=c==null?void 0:c.cleanups)==null||u.push(f),f}function a(l){function u(...s){e(u),l(...s)}return n(u)}function e(l){const u=d.get(t);u&&(u.delete(l),u.size||i())}function i(){d.delete(t)}function v(l,u){var s;(s=d.get(t))==null||s.forEach(f=>f(l,u))}return{on:n,once:a,off:e,emit:v,reset:i}}const D=(t,c,n=!0)=>{const a=g("form-events",void 0),e=g("form-group",void 0),i=g("form-inputs",void 0);e&&(!n||t!=null&&t.legend?e.inputId.value=void 0:t!=null&&t.id&&(e.inputId.value=t==null?void 0:t.id),i&&(i.value[e.name.value]=e.inputId.value));const v=w(!1);function l(r,o){a&&a.emit({type:r,path:o})}function u(){l("blur",e==null?void 0:e.name.value),v.value=!0}function s(){l("change",e==null?void 0:e.name.value)}const f=S(()=>{(v.value||e!=null&&e.eagerValidation.value)&&l("input",e==null?void 0:e.name.value)},300);return{inputId:m(()=>(t==null?void 0:t.id)??(e==null?void 0:e.inputId.value)),name:m(()=>(t==null?void 0:t.name)??(e==null?void 0:e.name.value)),size:m(()=>{var o;const r=c.size[e==null?void 0:e.size.value]?e==null?void 0:e.size.value:null;return(t==null?void 0:t.size)??r??((o=c.default)==null?void 0:o.size)}),color:m(()=>{var r;return(r=e==null?void 0:e.error)!=null&&r.value?"red":t==null?void 0:t.color}),emitFormBlur:u,emitFormInput:f,emitFormChange:s}};export{A as a,y as b,S as c,j as d,D as u};
